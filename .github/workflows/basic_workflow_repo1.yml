name: Basic Variables Demo

on:
  workflow_dispatch:
  
jobs:
  job1:
    environment: test
    runs-on: ubuntu-latest
    outputs:
      var_output: ${{ steps.test.outputs.var_out }}
      direct_output: ${{ steps.test.outputs.direct_out }}

    steps:
      - name: Try all secret output methods
        id: test
        run: |
          # Step 1: secret into variable
          MY_SECRET="${{ secrets.SECRET1 }}"

          # Step 2: variable into GITHUB_OUTPUT
          echo "var_out=$MY_SECRET" >> $GITHUB_OUTPUT

          # Step 3: direct secret into GITHUB_OUTPUT
          echo "direct_out=${{ secrets.SECRET1 }}" >> $GITHUB_OUTPUT


  job2:
    needs: job1
    runs-on: ubuntu-latest
    steps:
      - name: Print outputs from job1
        run: |
          echo "Variable output: ${{ needs.job1.outputs.var_output }}"
          echo "Direct output: ${{ needs.job1.outputs.direct_output }}"
